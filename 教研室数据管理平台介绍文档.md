# 教研室数据管理平台

## 📋 项目概述

教研室数据管理平台是一个智能化、数字化、透明化的全流程考评管理系统，集成AI自动评分、多端协同、实时监控于一体，助力教研室工作考评现代化。

### 系统定位
- **类型**: 教育管理平台
- **用户**: 教师、教研室主任、二级学院领导、管理部门、校长办公会
- **目标**: 实现教研室工作考评的全流程数字化管理

---

## 🎯 核心功能

### 🔄 双模式工作方式

系统支持两种工作模式，用户可以根据需求自由切换：

#### 三端模式（功能导向）
按功能端口划分，适合管理员和熟练用户
- **教研室端**: 自评填写、材料上传、结果查看
- **管理端**: 手动评分、最终得分、异常处理、公示管理
- **校长办公会端**: 数据监控、结果审定

#### 四角色模式（角色导向）
按用户角色划分，适合新用户和需要流程指引的用户
- **普通教师**: 查看本教研室考评结果、数据分析（只读权限）
- **教研室负责人**: 自评管理、材料管理、AI评分、改进闭环（读写权限）
- **二级学院负责人**: 学院驾驶舱、整改督导（只读+审核权限）
- **学校教务处负责人**: 监控中心、评分管理、异常处理、公示管理（读写+管理权限）

**模式切换**: 点击侧边栏顶部的切换按钮即可在两种模式之间切换，系统会自动记住您的选择。

**流程可视化**: 四角色模式下显示8步流程条，根据角色高亮相关节点：
```
1. 自评填报 → 2. 材料上传 → 3. AI评分 → 4. 手动评分 
→ 5. 最终得分 → 6. 数据审定 → 7. 结果公示 → 8. 改进闭环
```

---

### 1. 教研室端 (教师/主任)
教研室成员及负责人使用的功能模块

#### 普通教师 (查看权限)
- **结果透视**: 登录后可见所属教研室的最终评分、排名及扣分详情
- **反馈查看**: 查看考评小组的定性评价与改进建议
- **材料上传**: 协助上传支撑材料

#### 教研室主任 (管理权限)
- **自评填报**: 填写教研室工作考核表，支持实时保存
- **详情分析**: 查看各项指标雷达图、历史数据对比、未得分项清单
- **改进闭环**: 针对薄弱项填写“改进措施”（含目标、责任人、时限）
- **附件管理**: 全权管理所有支撑材料

### 2. 二级学院端
学院领导使用的功能模块

#### 学院驾驶舱
- **全院概览**: 查看下属所有教研室的考评横向对比（柱状图/热力图）
- **共性分析**: 自动汇总学院层面的主要扣分点与共性问题

#### 整改督导
- **措施审核**: 查看各教研室提交的改进措施
- **进度追踪**: 监督整改方案的执行情况，支持在线批注

### 3. 管理端
考评管理部门使用的功能模块

#### 监控中心
- **手动评分**: 考评小组和办公室进行专业评分
- **最终得分**: 综合所有评分确定最终结果
- **异常处理**: 处理AI标记的异常数据

#### 分析中心
- **数据同步**: 同步数据至校长办公会
- **发起公示**: 公示考评结果，透明公开

#### 应用中心
- **附件管理**: 查看和管理所有附件
- **系统配置**: 系统参数和权限配置

### 4. 校长办公会端
校领导使用的功能模块

#### 数据看板
- **实时监控**: 查看实时数据和排名对比
- **数据分析**: 深度数据分析和趋势预测

#### 审批中心
- **结果审定**: 审定考评结果，决定是否公示
- **公示管理**: 管理公示流程和结果

---

## 🎨 设计特色

### 双模式切换
系统支持两种工作模式，满足不同用户需求：

- **三端模式**: 功能导向，按端口组织，适合管理员和熟练用户
- **四角色模式**: 角色导向，按职责组织，适合新用户和需要流程指引的用户
- **一键切换**: 点击侧边栏顶部按钮即可切换
- **状态保持**: 系统自动记住用户的模式选择

### 平台化设计
采用左侧导航栏 + 右侧内容区的经典平台布局，符合用户操作习惯

```
┌──────┬──────────────────────────┐
│      │   标签栏                  │
│ 侧   ├──────────────────────────┤
│ 边   │                          │
│ 栏   │   内容区                  │
│      │   (功能卡片网格)          │
│      │                          │
│      ├──────────────────────────┤
│      │   页脚                    │
└──────┴──────────────────────────┘
```

### 配色方案
采用警察蓝色系，庄重、专业、权威

- **主背景**: #1e3a5f (警察蓝)
- **侧边栏**: 深蓝色 (#1e3a5f)
- **内容区**: 浅灰色 (#f5f7fa)
- **强调色**: #2c4a6d (深蓝色)
- **激活标识**: #7cb342 (绿色)

**角色专属配色**（四角色模式）:
- 普通教师: #42a5f5 (天蓝色)
- 教研室负责人: #66bb6a (深绿色)
- 二级学院负责人: #ab47bc (紫色)
- 学校教务处负责人: #ff7043 (橙红色)

### 交互设计
- 左侧固定导航，始终可见
- 双模式一键切换，状态保持
- 流程条可视化（四角色模式）
- 功能卡片悬停动画效果
- 选中状态有明确的视觉标识
- 完全响应式设计
- 点击标题快速返回首页

---

## � 双模式功能详解

### 什么是双模式？

教研室数据管理平台支持两种工作模式，用户可以根据自己的需求和习惯自由切换：

#### 三端模式（功能导向）
- **设计理念**: 按功能端口划分，相关功能集中在一个端口
- **适用用户**: 系统管理员、需要执行多种功能的用户、熟悉系统功能结构的用户
- **特点**: 功能集中、操作直观、灵活性高
- **端口结构**:
  - 教研室端：自评填写、材料上传、结果查看
  - 管理端：手动评分、最终得分、异常处理、公示管理
  - 校长办公会端：数据监控、结果审定

#### 四角色模式（角色导向）
- **设计理念**: 按用户角色划分，每个角色代表一类用户的工作职责和权限范围
- **适用用户**: 新用户、有明确角色定位的用户、需要流程指引的用户
- **特点**: 角色明确、权限清晰、流程可视、工作导向
- **角色结构**:
  - 普通教师：查看本教研室考评结果、数据分析（只读权限）
  - 教研室负责人：自评管理、材料管理、AI评分、改进闭环（读写权限）
  - 二级学院负责人：学院驾驶舱、整改督导（只读+审核权限）
  - 学校教务处负责人：监控中心、评分管理、异常处理、公示管理（读写+管理权限）

### 如何切换模式？

1. **查看当前模式**: 侧边栏顶部显示当前的端口或角色名称
2. **点击切换按钮**: 点击侧边栏顶部的"切换到四角色模式"或"切换到三端模式"按钮
3. **自动保存**: 系统会自动记住您的选择，下次打开时自动恢复

### 流程条可视化（四角色模式）

四角色模式下，系统会在主内容区顶部显示8步流程条，帮助用户了解当前在整个考评流程中的位置：

```
1. 自评填报 → 2. 材料上传 → 3. AI评分 → 4. 手动评分 
→ 5. 最终得分 → 6. 数据审定 → 7. 结果公示 → 8. 改进闭环
```

**流程条特点**:
- 🟢 绿色：已完成的步骤
- 🔵 蓝色：当前步骤
- ⚪ 灰色：未开始的步骤
- 🟠 橙色边框：当前角色负责的步骤

**各角色高亮节点**:
- 普通教师：节点 1, 2, 8
- 教研室负责人：节点 1, 2, 3, 8
- 二级学院负责人：节点 8
- 学校教务处负责人：节点 3, 4, 5, 7

### 角色专属配色

在四角色模式下，每个角色都有专属的强调色，用于侧边栏激活状态、按钮、图标等：

| 角色 | 专属配色 | 色值 |
|------|---------|------|
| 普通教师 | 天蓝色 | #42a5f5 |
| 教研室负责人 | 深绿色 | #66bb6a |
| 二级学院负责人 | 紫色 | #ab47bc |
| 学校教务处负责人 | 橙红色 | #ff7043 |

### 使用建议

**选择三端模式的情况**:
- ✅ 您是系统管理员，需要访问所有功能
- ✅ 您熟悉系统功能结构，按功能模块操作更高效
- ✅ 您需要快速在不同功能模块之间切换
- ✅ 您不需要严格的角色权限控制

**选择四角色模式的情况**:
- ✅ 您是新用户，首次使用系统
- ✅ 您有明确的角色定位（教师、负责人、学院领导、教务处）
- ✅ 您需要清晰的工作流程指引
- ✅ 您需要了解当前在整个流程中的位置
- ✅ 您需要严格的角色权限控制

---

## 💻 技术架构

### 前端技术栈
- **框架**: Vue 3 (Composition API)
- **语言**: TypeScript
- **构建工具**: Vite
- **UI组件库**: Element Plus
- **路由**: Vue Router
- **状态管理**: Pinia (可选)

### 后端技术栈
- **框架**: FastAPI
- **语言**: Python 3.11+
- **数据库**: PostgreSQL / SQLite
- **ORM**: SQLAlchemy
- **API文档**: Swagger/OpenAPI
- **服务器**: Uvicorn

### 开发工具
- **版本控制**: Git
- **包管理**: npm (前端) / pip (后端)
- **代码规范**: ESLint + Prettier
- **测试框架**: Vitest (前端) / Pytest (后端)

---

## 🚀 快速开始

### 环境要求
- Node.js 18+
- Python 3.11+
- PostgreSQL 15+ (可选，支持SQLite)

### 安装步骤

#### 1. 克隆项目
```bash
git clone <repository-url>
cd 教研室数据综合管理平台
```

#### 2. 安装后端依赖
```bash
cd backend
pip install -r requirements.txt
```

#### 3. 安装前端依赖
```bash
cd frontend
npm install
```

#### 4. 配置环境变量
```bash
# 后端配置
cp backend/.env.example backend/.env
# 编辑 .env 文件，配置数据库连接等信息
```

#### 5. 启动服务

**后端服务** (端口 8000):
```bash
cd backend
# 使用 SQLite (测试模式)
$env:USE_SQLITE="true"; python -m uvicorn app.main:app --reload --port 8000

# 或使用 PostgreSQL (生产模式)
python -m uvicorn app.main:app --reload --port 8000
```

**前端服务** (端口 3000):
```bash
cd frontend
npm run dev
```

#### 6. 访问系统
- 前端平台: http://localhost:3000
- API文档: http://localhost:8000/docs
- 健康检查: http://localhost:8000/api/health

---

## 📁 项目结构

```
教研室数据综合管理平台/
├── backend/                    # 后端代码
│   ├── app/
│   │   ├── api/               # API路由
│   │   │   └── v1/
│   │   │       ├── endpoints/ # 各功能端点
│   │   │       └── api.py     # API汇总
│   │   ├── core/              # 核心配置
│   │   │   ├── config.py      # 配置文件
│   │   │   ├── security.py    # 安全相关
│   │   │   └── deps.py        # 依赖注入
│   │   ├── db/                # 数据库
│   │   │   ├── base.py        # 数据库基类
│   │   │   └── init_db.py     # 初始化脚本
│   │   ├── models/            # 数据模型
│   │   ├── schemas/           # Pydantic模型
│   │   ├── services/          # 业务逻辑
│   │   └── main.py            # 应用入口
│   ├── alembic/               # 数据库迁移
│   ├── tests/                 # 测试文件
│   ├── requirements.txt       # Python依赖
│   └── .env                   # 环境变量
│
├── frontend/                   # 前端代码
│   ├── src/
│   │   ├── api/               # API调用
│   │   ├── components/        # 公共组件
│   │   │   ├── PageHeader.vue # 页面头部
│   │   │   └── PlatformLayout.vue # 平台布局
│   │   ├── views/             # 页面视图
│   │   │   ├── Home.vue       # 首页
│   │   │   ├── SelfEvaluation.vue
│   │   │   ├── ManualScoring.vue
│   │   │   └── ...
│   │   ├── router/            # 路由配置
│   │   ├── types/             # TypeScript类型
│   │   ├── utils/             # 工具函数
│   │   ├── App.vue            # 根组件
│   │   └── main.ts            # 应用入口
│   ├── public/                # 静态资源
│   │   └── school-logo.jpg    # 校徽
│   ├── package.json           # 依赖配置
│   └── vite.config.ts         # Vite配置
│
├── nginx/                      # Nginx配置
├── scripts/                    # 脚本文件
├── docker-compose.yml          # Docker配置
└── README.md                   # 项目说明
```

---

## 🔐 权限管理

### 角色定义
1. **普通教师**: 查看所属教研室结果与反馈详情
2. **教研室主任**: 填报自评、管理材料、提交改进措施
3. **二级学院领导**: 查看全院数据分析、督导整改落实
4. **考评小组**: 手动评分、查看基础数据
5. **考评办公室**: 确定最终得分、处理异常、发起公示
6. **校长办公会**: 审定结果、查看全校决策报表

### 权限控制
- 基于角色的访问控制 (RBAC)
- JWT Token 认证
- API级别的权限验证
- 操作日志全程记录

---

## 📊 数据流程

### 考评流程
```
1. 教研室填写自评表
   ↓
2. 上传支撑材料
   ↓
3. AI自动评分
   ↓
4. 考评小组手动评分
   ↓
5. 考评办公室确定最终得分
   ↓
6. 数据同步至校长办公会
   ↓
7. 校长办公会审定
   ↓
8. 发起公示 (全校/特定范围)
   ↓
9. 结果与反馈推送
   ↓
10. 教研室主任提交改进措施
    ↓
11. 二级学院领导审核与督导
```

### 数据同步
- 教研室端 → 管理端: 实时同步
- 管理端 → 校长办公会端: 手动触发
- 支持批量数据导入导出

---

## 🎯 核心特性

### 1. 双模式工作方式
- **三端模式**: 功能导向，按端口组织
- **四角色模式**: 角色导向，按职责组织
- **一键切换**: 随时切换工作模式
- **状态保持**: 自动记住用户选择
- **流程可视**: 四角色模式显示8步流程条

### 2. AI智能评分
- 集成 DeepSeek API
- 自动解析评分
- 异常数据标记
- 提高评分效率

### 3. 多端协同
- 双模式架构（三端/四角色）
- 数据实时同步
- 权限精细控制
- 流程清晰透明

### 4. 数据安全
- 完善的权限控制
- 操作日志全程记录
- 数据加密传输
- 定期备份机制

### 5. 实时监控
- 图表化数据展示
- 实时排名对比
- 趋势分析预测
- 异常数据预警

### 6. 附件管理
- 支持多种文件格式
- 批量上传下载
- 文件分类管理
- 归档和检索

---

## 🔧 配置说明

### 后端配置 (.env)
```env
# 数据库配置
DATABASE_URL=postgresql://user:password@localhost/dbname
USE_SQLITE=false

# API配置
API_V1_STR=/api
PROJECT_NAME=教研室数据管理平台

# 安全配置
SECRET_KEY=your-secret-key
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# DeepSeek API
DEEPSEEK_API_KEY=your-api-key

# MinIO配置
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
```

### 前端配置 (vite.config.ts)
```typescript
export default defineConfig({
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true
      }
    }
  }
})
```

---

## 📱 响应式设计

### 支持设备
- 桌面电脑 (1920px+)
- 笔记本电脑 (1366px - 1920px)
- 平板电脑 (768px - 1366px)
- 手机 (< 768px)

### 适配策略
- 侧边栏在手机端收缩为图标
- 功能卡片在小屏幕上单列显示
- 表格支持横向滚动
- 表单自适应布局

---

## 🧪 测试

### 前端测试
```bash
cd frontend
npm run test        # 运行单元测试
npm run test:ui     # 测试UI界面
npm run coverage    # 生成覆盖率报告
```

### 后端测试
```bash
cd backend
pytest              # 运行所有测试
pytest -v           # 详细输出
pytest --cov        # 生成覆盖率报告
```

---

## 📦 部署

### Docker 部署
```bash
# 构建镜像
docker-compose build

# 启动服务
docker-compose up -d

# 查看日志
docker-compose logs -f
```

### 生产环境部署
1. 配置 Nginx 反向代理
2. 配置 SSL 证书
3. 配置 PostgreSQL 数据库
4. 配置 MinIO 对象存储
5. 配置环境变量
6. 启动服务

详见: `DEPLOYMENT_GUIDE.md`

---

## 🔄 更新日志

### v1.1.0 (2026-02-07)
- ✅ 新增双模式切换功能
- ✅ 实现四角色模式（普通教师、教研室负责人、二级学院负责人、学校教务处负责人）
- ✅ 添加8步流程条可视化（四角色模式）
- ✅ 实现模式状态保持功能
- ✅ 添加角色专属配色
- ✅ 优化用户体验和交互设计

### v1.0.0 (2026-02-06)
- ✅ 完成平台化设计改造
- ✅ 采用警察蓝色配色方案
- ✅ 添加 PageHeader 组件
- ✅ 优化页面跳转逻辑
- ✅ 添加返回主页功能
- ✅ 完善响应式设计

### 计划中的功能
- [ ] 权限控制优化（基于角色的动态权限）
- [ ] 快捷键支持（如 Ctrl+M 切换模式）
- [ ] 用户引导系统（首次使用引导）
- [ ] 暗色模式支持
- [ ] 数据可视化大屏
- [ ] 移动端原生应用
- [ ] 消息通知系统
- [ ] 工作流引擎
- [ ] 报表生成系统

---

## 🤝 贡献指南

### 开发流程
1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 提交 Pull Request

### 代码规范
- 遵循 ESLint 规则
- 使用 TypeScript 类型
- 编写单元测试
- 添加注释文档

---

## 📞 联系方式

### 技术支持
- 邮箱: support@example.com
- 电话: xxx-xxxx-xxxx

### 问题反馈
- GitHub Issues: [项目地址]/issues
- 在线文档: [文档地址]

---

## 📄 许可证

本项目采用 MIT 许可证

---

## 🙏 致谢

感谢以下开源项目:
- Vue.js
- FastAPI
- Element Plus
- PostgreSQL
- Vite

---

## 📚 相关文档

### 核心文档
- [快速开始指南](QUICK_START.md)
- [部署指南](DEPLOYMENT_GUIDE.md)
- [API文档](http://localhost:8000/docs)

### 设计文档
- [前端美化说明](前端美化说明.md)
- [平台化设计说明](平台化设计完成说明.md)
- [配色方案说明](页面配色更新说明.md)
- [四角色完整UI设计方案](四角色完整UI设计方案.md)

### 双模式功能文档
- [双模式功能实施完成说明](双模式功能实施完成说明.md)
- [双模式功能测试指南](双模式功能测试指南.md)
- [双模式对比说明](双模式对比说明.md)
- [双模式使用指南](双模式使用指南.md)
- [双模式实施总结](双模式实施总结.md)
- [双模式实施检查清单](双模式实施检查清单.md)

---

## 🎯 项目目标

### 短期目标 (3个月)
- ✅ 完成核心功能开发
- ✅ 完成UI/UX设计
- ⏳ 完成系统测试
- ⏳ 上线试运行

### 中期目标 (6个月)
- 收集用户反馈
- 优化系统性能
- 增加新功能
- 扩展用户规模

### 长期目标 (1年)
- 成为行业标杆
- 推广到更多学校
- 开发移动端应用
- 建立生态系统

---

**最后更新**: 2026-02-07  
**版本**: v1.1.0  
**状态**: ✅ 开发完成，运行中

---

© 2026 教研室数据管理平台. All rights reserved.
