# ç™»å½•æ€§èƒ½ä¼˜åŒ– - éƒ¨ç½²æŒ‡å—

**éƒ¨ç½²æ—¥æœŸ**: 2026-02-15  
**éƒ¨ç½²çŠ¶æ€**: ğŸ”„ å¾…éƒ¨ç½²  

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### æ£€æŸ¥æ¸…å•

- [x] ä»£ç ä¿®æ”¹å·²å®Œæˆ
- [x] ä»£ç å®¡æŸ¥å·²å®Œæˆ
- [x] æ²¡æœ‰è¯­æ³•é”™è¯¯
- [ ] å¤‡ä»½å·²å®Œæˆ
- [ ] æµ‹è¯•ç¯å¢ƒå·²å‡†å¤‡

### å¤‡ä»½æ­¥éª¤

```bash
# 1. å¤‡ä»½åç«¯ä»£ç 
cp -r backend backend.backup.2026-02-15

# 2. å¤‡ä»½æ•°æ®åº“ (å¦‚æœéœ€è¦)
# MySQL
mysqldump -u root -p database_name > database.backup.2026-02-15.sql

# SQLite
cp backend/test.db backend/test.db.backup.2026-02-15
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥: åœæ­¢åç«¯æœåŠ¡

```bash
# 1. æ‰¾åˆ°åç«¯è¿›ç¨‹
# Windows
tasklist | findstr python

# Linux/macOS
ps aux | grep uvicorn

# 2. åœæ­¢åç«¯æœåŠ¡
# Windows
taskkill /PID <process_id> /F

# Linux/macOS
kill -9 <process_id>

# æˆ–è€…ä½¿ç”¨ Ctrl+C åœæ­¢
```

### ç¬¬äºŒæ­¥: æ›´æ–°ä»£ç 

#### æ–¹æ³• 1: ä½¿ç”¨ Git (æ¨è)

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/project

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. éªŒè¯æ–‡ä»¶å·²æ›´æ–°
git log --oneline -5
```

#### æ–¹æ³• 2: æ‰‹åŠ¨æ›´æ–°

```bash
# 1. æ›´æ–° backend/app/core/security.py
# ä¿®æ”¹å†…å®¹:
pwd_context = CryptContext(
    schemes=["bcrypt"],
    deprecated="auto",
    bcrypt__rounds=10  # ä»é»˜è®¤ 12 æ”¹ä¸º 10
)

# 2. æ›´æ–° backend/app/api/v1/endpoints/auth.py
# æ·»åŠ æ€§èƒ½æ—¥å¿— (è¯¦è§ä»£ç å˜æ›´æ–‡æ¡£)
```

### ç¬¬ä¸‰æ­¥: éªŒè¯ä»£ç 

```bash
# 1. æ£€æŸ¥ Python è¯­æ³•
python -m py_compile backend/app/core/security.py
python -m py_compile backend/app/api/v1/endpoints/auth.py

# 2. æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜è¯­æ³•æ­£ç¡®
```

### ç¬¬å››æ­¥: å¯åŠ¨åç«¯æœåŠ¡

#### å¼€å‘ç¯å¢ƒ

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. å¯åŠ¨åç«¯æœåŠ¡
python -m uvicorn app.main:app --reload

# 3. æŸ¥çœ‹è¾“å‡º
# åº”è¯¥çœ‹åˆ°:
# INFO:     Uvicorn running on http://127.0.0.1:8000
# INFO:     Application startup complete
```

#### ç”Ÿäº§ç¯å¢ƒ

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. å¯åŠ¨åç«¯æœåŠ¡ (ä½¿ç”¨ gunicorn)
gunicorn -w 4 -b 0.0.0.0:8000 app.main:app

# æˆ–è€…ä½¿ç”¨ systemd æœåŠ¡
sudo systemctl restart teaching-office-backend

# 3. æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u teaching-office-backend -f
```

### ç¬¬äº”æ­¥: éªŒè¯éƒ¨ç½²

```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:8000/api/auth/verify

# 2. æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"director1","password":"password123"}'

# 3. æŸ¥çœ‹å“åº”
# åº”è¯¥è¿”å› 200 å’Œ token
```

---

## ğŸ“Š éªŒè¯éƒ¨ç½²

### æ­¥éª¤ 1: æŸ¥çœ‹åç«¯æ—¥å¿—

```bash
# 1. å¯åŠ¨åç«¯åï¼ŒæŸ¥çœ‹æ—¥å¿—
# åº”è¯¥çœ‹åˆ°:
# INFO:     Uvicorn running on http://127.0.0.1:8000
# INFO:     Application startup complete

# 2. æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"director1","password":"password123"}'

# 3. æŸ¥çœ‹åç«¯æ—¥å¿—è¾“å‡º
# åº”è¯¥çœ‹åˆ°:
# LOGIN START: 2026-02-15 10:30:45
# Step 1: Query user from database START
# Step 1: Query user from database END - Duration: 8.50ms
# Step 2: Password verification START
# Step 2: Password verification END - Duration: 120.30ms
# ...
# LOGIN DURATION BREAKDOWN:
#   - DB Query: 8.50ms
#   - Password Verify: 120.30ms
#   - Role Validation: 0.10ms
#   - JWT Generation: 2.50ms
#   - Response Prep: 0.20ms
#   - TOTAL: 131.60ms
```

### æ­¥éª¤ 2: è¿è¡Œæ€§èƒ½æµ‹è¯•

```bash
# 1. è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬
python verify_login_performance.py

# 2. æŸ¥çœ‹è¾“å‡º
# åº”è¯¥çœ‹åˆ°:
# ğŸ“Š æ€§èƒ½ç»Ÿè®¡:
#   æˆåŠŸè¯·æ±‚: 10/10
#   å¤±è´¥è¯·æ±‚: 0/10
#   å¹³å‡è€—æ—¶: 129.20ms
#   æœ€å°è€—æ—¶: 125.30ms
#   æœ€å¤§è€—æ—¶: 132.10ms
#   ä¸­ä½æ•°:   129.50ms
#   æ ‡å‡†å·®:   2.15ms
# 
# ğŸ¯ æ€§èƒ½è¯„çº§:
#   âœ… è‰¯å¥½ (100-300ms)
# 
# âœ… ç›®æ ‡æ£€æŸ¥:
#   âœ… æ€§èƒ½ç›®æ ‡å·²è¾¾æˆ (< 300ms)
#   âœ… ä¼˜ç§€ç›®æ ‡å·²è¾¾æˆ (< 200ms)
```

### æ­¥éª¤ 3: æµè§ˆå™¨æµ‹è¯•

```bash
# 1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
# 2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
# 3. æ‰“å¼€ Network æ ‡ç­¾
# 4. ç‚¹å‡»ç™»å½•
# 5. æŸ¥çœ‹ /api/auth/login çš„å“åº”æ—¶é—´
# 6. åº”è¯¥ < 300ms
```

### æ­¥éª¤ 4: åŠŸèƒ½æµ‹è¯•

```bash
# 1. æµ‹è¯•ç™»å½•æµç¨‹
# - è¾“å…¥ç”¨æˆ·å: director1
# - è¾“å…¥å¯†ç : password123
# - ç‚¹å‡»ç™»å½•
# - åº”è¯¥æˆåŠŸç™»å½•

# 2. æµ‹è¯•è·³è½¬
# - åº”è¯¥è·³è½¬åˆ°ä¸»é¡µ
# - åº”è¯¥æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

# 3. æµ‹è¯•å…¶ä»–åŠŸèƒ½
# - åˆ›å»ºè‡ªè¯„è¡¨
# - ä¸Šä¼ é™„ä»¶
# - æäº¤è¯„åˆ†
```

---

## ğŸ”„ å›æ»šæ­¥éª¤

å¦‚æœéƒ¨ç½²å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š

### æ–¹æ³• 1: ä½¿ç”¨å¤‡ä»½

```bash
# 1. åœæ­¢åç«¯æœåŠ¡
# Windows
taskkill /PID <process_id> /F

# Linux/macOS
kill -9 <process_id>

# 2. æ¢å¤å¤‡ä»½
rm -rf backend
cp -r backend.backup.2026-02-15 backend

# 3. é‡å¯åç«¯æœåŠ¡
cd backend
python -m uvicorn app.main:app --reload
```

### æ–¹æ³• 2: ä½¿ç”¨ Git

```bash
# 1. åœæ­¢åç«¯æœåŠ¡
# Windows
taskkill /PID <process_id> /F

# Linux/macOS
kill -9 <process_id>

# 2. å›æ»šä»£ç 
git revert HEAD

# 3. é‡å¯åç«¯æœåŠ¡
cd backend
python -m uvicorn app.main:app --reload
```

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] ä»£ç ä¿®æ”¹å·²å®Œæˆ
- [ ] ä»£ç å®¡æŸ¥å·²å®Œæˆ
- [ ] æ²¡æœ‰è¯­æ³•é”™è¯¯
- [ ] å¤‡ä»½å·²å®Œæˆ
- [ ] æµ‹è¯•ç¯å¢ƒå·²å‡†å¤‡

### éƒ¨ç½²ä¸­
- [ ] åç«¯æœåŠ¡å·²åœæ­¢
- [ ] ä»£ç å·²æ›´æ–°
- [ ] ä»£ç å·²éªŒè¯
- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨

### éƒ¨ç½²å
- [ ] åç«¯æ—¥å¿—æ­£å¸¸
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] æµè§ˆå™¨æµ‹è¯•é€šè¿‡
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

### éªŒè¯å®Œæˆ
- [ ] å“åº”æ—¶é—´ < 300ms
- [ ] å¹³å‡å“åº”æ—¶é—´ < 200ms
- [ ] æ²¡æœ‰é”™è¯¯æ—¥å¿—
- [ ] ç”¨æˆ·åé¦ˆè‰¯å¥½

---

## ğŸ¯ éƒ¨ç½²ç›®æ ‡

### æ€§èƒ½ç›®æ ‡
- âœ… ç™»å½•å“åº”æ—¶é—´ < 300ms
- âœ… å¹³å‡å“åº”æ—¶é—´ < 200ms
- âœ… å¯†ç éªŒè¯æ—¶é—´ < 200ms

### åŠŸèƒ½ç›®æ ‡
- âœ… ç™»å½•æˆåŠŸ
- âœ… è·³è½¬åˆ°ä¸»é¡µ
- âœ… æ— é”™è¯¯æ—¥å¿—

### ç”¨æˆ·ä½“éªŒç›®æ ‡
- âœ… ç™»å½•é€Ÿåº¦å¿«
- âœ… æ— æ˜æ˜¾å»¶è¿Ÿ
- âœ… ç”¨æˆ·æ»¡æ„

---

## ğŸ“Š éƒ¨ç½²æ—¶é—´è¡¨

### é¢„è®¡æ—¶é—´

| æ­¥éª¤ | æ—¶é—´ | è¯´æ˜ |
|-----|------|------|
| å¤‡ä»½ | 5 åˆ†é’Ÿ | å¤‡ä»½ä»£ç å’Œæ•°æ®åº“ |
| åœæ­¢æœåŠ¡ | 1 åˆ†é’Ÿ | åœæ­¢åç«¯æœåŠ¡ |
| æ›´æ–°ä»£ç  | 2 åˆ†é’Ÿ | æ›´æ–°ä»£ç æ–‡ä»¶ |
| éªŒè¯ä»£ç  | 2 åˆ†é’Ÿ | æ£€æŸ¥è¯­æ³• |
| å¯åŠ¨æœåŠ¡ | 2 åˆ†é’Ÿ | å¯åŠ¨åç«¯æœåŠ¡ |
| éªŒè¯éƒ¨ç½² | 5 åˆ†é’Ÿ | æµ‹è¯•åŠŸèƒ½å’Œæ€§èƒ½ |
| **æ€»è®¡** | **17 åˆ†é’Ÿ** | - |

### å»ºè®®éƒ¨ç½²æ—¶é—´

- **å¼€å‘ç¯å¢ƒ**: ä»»ä½•æ—¶é—´
- **æµ‹è¯•ç¯å¢ƒ**: å·¥ä½œæ—¶é—´
- **ç”Ÿäº§ç¯å¢ƒ**: éé«˜å³°æ—¶æ®µ (å¦‚æ™šä¸Š 22:00-23:00)

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åç™»å½•ä»ç„¶å¾ˆæ…¢
**A**: 
1. æ£€æŸ¥ bcrypt__rounds æ˜¯å¦ä¸º 10
2. é‡å¯åç«¯æœåŠ¡
3. æŸ¥çœ‹åç«¯æ—¥å¿—

### Q2: çœ‹ä¸åˆ°æ€§èƒ½æ—¥å¿—
**A**:
1. æ£€æŸ¥æ—¥å¿—çº§åˆ«é…ç½®
2. é‡å¯åç«¯æœåŠ¡
3. æŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡º

### Q3: ç™»å½•å¤±è´¥
**A**:
1. æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç 
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
3. æŸ¥çœ‹åç«¯æ—¥å¿—

### Q4: å¦‚ä½•å›æ»š
**A**:
1. åœæ­¢åç«¯æœåŠ¡
2. æ¢å¤å¤‡ä»½æˆ–ä½¿ç”¨ git revert
3. é‡å¯åç«¯æœåŠ¡

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼š
- `ç™»å½•æ€§èƒ½åˆ†æå’Œä¼˜åŒ–æŠ¥å‘Š-2026-02-15.md` - è¯¦ç»†åˆ†æ
- `ç™»å½•æ€§èƒ½ä¼˜åŒ–-å¿«é€Ÿå‚è€ƒ-2026-02-15.md` - å¿«é€Ÿå‚è€ƒ
- `ç™»å½•æ€§èƒ½æµ‹è¯•æŒ‡å—-2026-02-15.md` - æµ‹è¯•æ–¹æ³•
- `verify_login_performance.py` - æ€§èƒ½éªŒè¯è„šæœ¬

---

## âœ… éƒ¨ç½²å®Œæˆæ ‡å‡†

éƒ¨ç½²å®Œæˆéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1. âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
2. âœ… ç™»å½•åŠŸèƒ½æ­£å¸¸
3. âœ… å“åº”æ—¶é—´ < 300ms
4. âœ… æ²¡æœ‰é”™è¯¯æ—¥å¿—
5. âœ… ç”¨æˆ·åé¦ˆè‰¯å¥½

---

**éƒ¨ç½²æŒ‡å—å®Œæˆæ—¶é—´**: 2026-02-15  
**éƒ¨ç½²äººå‘˜**: Kiro AI Assistant  
**éƒ¨ç½²çŠ¶æ€**: ğŸ”„ å¾…éƒ¨ç½²  
**ä¸‹ä¸€æ­¥**: æ‰§è¡Œéƒ¨ç½²æ­¥éª¤

