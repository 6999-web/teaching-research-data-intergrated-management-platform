# 管理端三角色功能配置完成说明

## 更新时间
2024年（最新版本）

## 更新概述
成功将管理端从单一角色改造为三个独立角色，每个角色拥有专属的功能菜单和操作界面。

---

## 一、角色定义更新

### 原角色
- ❌ 学校教务处负责人 (academic_affairs) - 已移除

### 新角色
- ✅ **评教小组** (evaluation_team)
- ✅ **评教小组办公室** (evaluation_office)
- ✅ **校长办公会** (president_office)

---

## 二、角色功能详细说明

#### 评教小组 (evaluation_team)
**主要职责**：对各个教研室上传的考评表进行手动评分

**菜单配置**：
1. **评分管理**
   - 手动评分：对各个教研室上传的考评表进行手动评分
   - 最终得分：综合所有评分确定最终结果

2. **异常处理**
   - 异常数据：查看AI标记的异常数据
   - 处理记录：查看异常数据处理记录

3. **评分记录**
   - 我的评分：查看我的评分记录
   - 全部评分：查看所有评审人打分记录

#### 评教小组办公室 (evaluation_office)
**主要职责**：决定是否公示（分发结果到各个教研室），将结果上传到校长办公会端

**菜单配置**：
1. **公示管理**
   - 发起公示：公示考评结果，透明公开
   - 公示状态：查看公示进度和状态

2. **数据同步**
   - 同步到校长办公会：将结果上传到校长办公会端
   - 同步记录：查看数据同步历史记录

3. **附件管理**
   - 附件列表：查看和管理所有附件
   - 附件审核：审核教研室提交的附件

#### 校长办公会 (president_office)
**主要职责**：查看评教的最终结果

**菜单配置**：
1. **数据看板**
   - 实时监控：查看实时数据和排名对比
   - 数据分析：深度数据分析和趋势预测

2. **最终结果**
   - 考评结果：查看评教的最终结果
   - 历史数据：查看历年考评数据

3. **审批中心**
   - 结果审定：审定考评结果
   - 公示审批：决定是否公示结果

### 3. 技术实现

#### 修改的文件
1. **frontend/src/stores/auth.ts**
   - 更新角色类型定义
   - 添加新角色：evaluation_team、evaluation_office、president_office
   - 移除旧角色：academic_affairs
   - 更新角色名称映射和颜色映射

2. **frontend/src/views/Login.vue**
   - 更新管理端角色选择选项
   - 改为：评教小组、评教小组办公室、校长办公会

3. **frontend/src/views/ManagementHome.vue**
   - 将 menuItems 改为计算属性，根据角色动态返回不同菜单
   - 将 tabsConfig 改为计算属性，根据角色返回不同标签页
   - 将 functionsConfig 改为计算属性，根据角色返回不同功能卡片
   - 每个角色都有独立的菜单、标签页和功能配置

#### 核心代码逻辑
```typescript
// 根据角色动态配置菜单
const menuItems = computed(() => {
  const role = authStore.userRole
  
  if (role === 'evaluation_team') {
    return [/* 评教小组菜单 */]
  } else if (role === 'evaluation_office') {
    return [/* 评教小组办公室菜单 */]
  } else if (role === 'president_office') {
    return [/* 校长办公会菜单 */]
  }
  
  return []
})
```

### 4. 用户体验优化

#### 登录流程
1. 用户选择"管理端"入口
2. 在登录对话框中选择角色（评教小组、评教小组办公室、校长办公会）
3. 输入用户名和密码
4. 登录后自动跳转到对应角色的主页，显示该角色专属的菜单和功能

#### 界面展示
- 每个角色看到的菜单项完全不同
- 每个菜单下的标签页和功能卡片也根据角色定制
- 侧边栏显示当前角色名称
- 保持统一的视觉风格和交互体验

### 5. 功能路由映射

#### 评教小组
- 手动评分 → `/manual-scoring`
- 最终得分 → `/final-score`
- 评分记录 → `/management-results`
- 异常处理 → `/anomaly-handling`

#### 评教小组办公室
- 公示管理 → `/publication`
- 数据同步 → `/data-sync`
- 附件管理 → `/attachment-management`

#### 校长办公会
- 数据看板 → `/president-office-dashboard`
- 最终结果 → `/management-results`
- 公示审批 → `/publication`

### 6. 测试建议

#### 测试步骤
1. 分别以三个角色登录管理端
2. 验证每个角色看到的菜单项是否正确
3. 点击每个菜单，验证标签页和功能卡片是否正确显示
4. 点击功能卡片，验证路由跳转是否正确
5. 验证角色名称在侧边栏和用户信息中正确显示

#### 预期结果
- 评教小组：看到3个菜单（评分管理、异常处理、评分记录）
- 评教小组办公室：看到3个菜单（公示管理、数据同步、附件管理）
- 校长办公会：看到3个菜单（数据看板、最终结果、审批中心）

### 7. 后续优化建议

1. **权限控制**：在路由守卫中添加角色权限验证
2. **数据隔离**：确保每个角色只能访问其权限范围内的数据
3. **功能完善**：将标记为 `#` 的功能路由替换为实际页面
4. **审计日志**：记录每个角色的操作日志
5. **帮助文档**：为每个角色提供专门的使用指南

## 总结

本次更新成功将管理端改造为三个独立角色，每个角色都有专属的功能菜单和操作界面。这样的设计使得：

1. **职责清晰**：每个角色的功能边界明确
2. **操作简化**：用户只看到与自己相关的功能
3. **安全性高**：不同角色之间功能隔离
4. **易于维护**：角色配置集中管理，便于后续调整

---

**文档版本**：v2.0  
**更新日期**：2024年  
**维护人员**：开发团队
