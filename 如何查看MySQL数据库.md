# å¦‚ä½•æŸ¥çœ‹MySQLæ•°æ®åº“

## ğŸ“Š æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“å**: teaching_office_evaluation
- **æœåŠ¡å™¨**: localhost:3306
- **ç”¨æˆ·å**: root
- **å¯†ç **: root
- **è¡¨æ•°é‡**: 15ä¸ª
- **å½“å‰è®°å½•æ•°**: 0ï¼ˆæ–°å»ºæ•°æ®åº“ï¼‰

---

## æ–¹æ³•1: ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆæœ€å¿«é€Ÿï¼‰

### Windowsç³»ç»Ÿ

1. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰æˆ–PowerShell
2. è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿æ¥MySQLï¼š

```bash
mysql -u root -p
```

3. è¾“å…¥å¯†ç ï¼š`root`

4. æ‰§è¡ŒSQLå‘½ä»¤ï¼š

```sql
-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“
SHOW DATABASES;

-- ä½¿ç”¨æˆ‘ä»¬çš„æ•°æ®åº“
USE teaching_office_evaluation;

-- æŸ¥çœ‹æ‰€æœ‰è¡¨
SHOW TABLES;

-- æŸ¥çœ‹è¡¨ç»“æ„
DESCRIBE users;
DESCRIBE self_evaluations;

-- æŸ¥è¯¢æ•°æ®
SELECT * FROM users;
SELECT * FROM teaching_offices;

-- é€€å‡º
EXIT;
```

---

## æ–¹æ³•2: ä½¿ç”¨Pythonè„šæœ¬ï¼ˆæ¨èï¼‰

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªæ£€æŸ¥è„šæœ¬ï¼š

```bash
cd backend
python check_database.py
```

è¿™ä¸ªè„šæœ¬ä¼šæ˜¾ç¤ºï¼š
- âœ… æ‰€æœ‰è¡¨çš„åˆ—è¡¨å’Œè®°å½•æ•°
- âœ… æ¯ä¸ªè¡¨çš„è¯¦ç»†ç»“æ„
- âœ… å¤–é”®å…³ç³»

---

## æ–¹æ³•3: ä½¿ç”¨Navicatï¼ˆå›¾å½¢åŒ–ç•Œé¢ï¼Œæœ€ç›´è§‚ï¼‰

### å¦‚æœä½ å·²ç»å®‰è£…äº†Navicatï¼š

1. **æ‰“å¼€Navicat**

2. **åˆ›å»ºæ–°è¿æ¥**
   - ç‚¹å‡»å·¦ä¸Šè§’"è¿æ¥" â†’ "MySQL"
   
3. **å¡«å†™è¿æ¥ä¿¡æ¯**
   ```
   è¿æ¥åï¼šæ•™ç ”å®¤æ•°æ®åº“
   ä¸»æœºï¼šlocalhost
   ç«¯å£ï¼š3306
   ç”¨æˆ·åï¼šroot
   å¯†ç ï¼šroot
   ```

4. **æµ‹è¯•è¿æ¥**
   - ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
   - å¦‚æœæ˜¾ç¤º"è¿æ¥æˆåŠŸ"ï¼Œç‚¹å‡»"ç¡®å®š"

5. **æ‰“å¼€æ•°æ®åº“**
   - åŒå‡»å·¦ä¾§çš„è¿æ¥å
   - å±•å¼€"teaching_office_evaluation"æ•°æ®åº“
   - å¯ä»¥çœ‹åˆ°æ‰€æœ‰15ä¸ªè¡¨

6. **æŸ¥çœ‹è¡¨æ•°æ®**
   - åŒå‡»ä»»æ„è¡¨å
   - å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘ã€æ·»åŠ æ•°æ®

### Navicatçš„ä¼˜åŠ¿ï¼š
- âœ… å¯è§†åŒ–ç•Œé¢ï¼Œæ“ä½œç®€å•
- âœ… å¯ä»¥ç›´æ¥ç¼–è¾‘æ•°æ®
- âœ… æ”¯æŒå¯¼å…¥å¯¼å‡ºæ•°æ®
- âœ… å¯ä»¥è®¾è®¡ERå›¾
- âœ… æ”¯æŒSQLæŸ¥è¯¢

---

## æ–¹æ³•4: ä½¿ç”¨MySQL Workbenchï¼ˆå®˜æ–¹å·¥å…·ï¼‰

### å¦‚æœä½ å®‰è£…äº†MySQL Workbenchï¼š

1. **æ‰“å¼€MySQL Workbench**

2. **åˆ›å»ºæ–°è¿æ¥**
   - ç‚¹å‡»"+"å·åˆ›å»ºæ–°è¿æ¥
   
3. **é…ç½®è¿æ¥**
   ```
   Connection Name: æ•™ç ”å®¤æ•°æ®åº“
   Hostname: localhost
   Port: 3306
   Username: root
   Password: ç‚¹å‡»"Store in Keychain"è¾“å…¥root
   ```

4. **æµ‹è¯•è¿æ¥**
   - ç‚¹å‡»"Test Connection"
   - æˆåŠŸåç‚¹å‡»"OK"

5. **æ‰“å¼€è¿æ¥**
   - åŒå‡»è¿æ¥å
   - åœ¨å·¦ä¾§"Schemas"ä¸­æ‰¾åˆ°"teaching_office_evaluation"

---

## æ–¹æ³•5: ä½¿ç”¨phpMyAdminï¼ˆWebç•Œé¢ï¼‰

### å¦‚æœä½ å®‰è£…äº†phpMyAdminï¼š

1. **æ‰“å¼€æµè§ˆå™¨**
   - è®¿é—®ï¼šhttp://localhost/phpmyadmin

2. **ç™»å½•**
   - ç”¨æˆ·åï¼šroot
   - å¯†ç ï¼šroot

3. **é€‰æ‹©æ•°æ®åº“**
   - åœ¨å·¦ä¾§ç‚¹å‡»"teaching_office_evaluation"

4. **æŸ¥çœ‹è¡¨**
   - å¯ä»¥çœ‹åˆ°æ‰€æœ‰15ä¸ªè¡¨
   - ç‚¹å‡»è¡¨åæŸ¥çœ‹æ•°æ®

---

## æ–¹æ³•6: ä½¿ç”¨VS Codeæ‰©å±•ï¼ˆå¼€å‘è€…æ¨èï¼‰

### å®‰è£…MySQLæ‰©å±•ï¼š

1. **æ‰“å¼€VS Code**

2. **å®‰è£…æ‰©å±•**
   - æŒ‰Ctrl+Shift+Xæ‰“å¼€æ‰©å±•å¸‚åœº
   - æœç´¢"MySQL"
   - å®‰è£…"MySQL" by Jun Han

3. **åˆ›å»ºè¿æ¥**
   - ç‚¹å‡»å·¦ä¾§çš„MySQLå›¾æ ‡
   - ç‚¹å‡»"+"æ·»åŠ è¿æ¥
   - å¡«å†™è¿æ¥ä¿¡æ¯ï¼ˆåŒä¸Šï¼‰

4. **æŸ¥çœ‹æ•°æ®åº“**
   - å±•å¼€è¿æ¥
   - å¯ä»¥ç›´æ¥åœ¨VS Codeä¸­æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®

---

## ğŸ“‹ æ•°æ®åº“è¡¨è¯´æ˜

### æ ¸å¿ƒè¡¨ï¼ˆ5ä¸ªï¼‰

1. **users** - ç”¨æˆ·è¡¨
   - å­˜å‚¨æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼ˆæ•™ç ”å®¤ã€ç®¡ç†å‘˜ç­‰ï¼‰

2. **colleges** - å­¦é™¢è¡¨
   - å­˜å‚¨å­¦é™¢ä¿¡æ¯

3. **teaching_offices** - æ•™ç ”å®¤è¡¨
   - å­˜å‚¨æ•™ç ”å®¤ä¿¡æ¯

4. **self_evaluations** - è‡ªè¯„è¡¨
   - å­˜å‚¨æ•™ç ”å®¤çš„è‡ªè¯„æ•°æ®

5. **attachments** - é™„ä»¶è¡¨
   - å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯

### è¯„åˆ†è¡¨ï¼ˆ3ä¸ªï¼‰

6. **ai_scores** - AIè¯„åˆ†è¡¨
   - AIè‡ªåŠ¨è¯„åˆ†ç»“æœï¼ˆä¸å¯ä¿®æ”¹ï¼‰

7. **manual_scores** - æ‰‹åŠ¨è¯„åˆ†è¡¨
   - äººå·¥è¯„åˆ†è®°å½•ï¼ˆä¸å¯ä¿®æ”¹ï¼‰

8. **final_scores** - æœ€ç»ˆå¾—åˆ†è¡¨
   - æœ€ç»ˆç¡®å®šçš„åˆ†æ•°ï¼ˆä¸å¯ä¿®æ”¹ï¼‰

### ç®¡ç†è¡¨ï¼ˆ7ä¸ªï¼‰

9. **anomalies** - å¼‚å¸¸è¡¨
   - è®°å½•è¯„åˆ†å¼‚å¸¸æƒ…å†µ

10. **publications** - å…¬ç¤ºè¡¨
    - ç»“æœå…¬ç¤ºè®°å½•

11. **approvals** - å®¡æ‰¹è¡¨
    - å®¡æ‰¹è®°å½•

12. **operation_logs** - æ“ä½œæ—¥å¿—è¡¨
    - æ‰€æœ‰æ“ä½œçš„æ—¥å¿—

13. **sync_tasks** - åŒæ­¥ä»»åŠ¡è¡¨
    - æ•°æ®åŒæ­¥ä»»åŠ¡

14. **insight_summaries** - æ´å¯Ÿæ‘˜è¦è¡¨
    - AIç”Ÿæˆçš„åˆ†ææ‘˜è¦

15. **improvement_plans** - æ”¹è¿›è®¡åˆ’è¡¨
    - æ”¹è¿›æªæ–½å’Œè®¡åˆ’

---

## ğŸ” å¸¸ç”¨SQLæŸ¥è¯¢

### æŸ¥çœ‹æ‰€æœ‰è¡¨
```sql
SHOW TABLES;
```

### æŸ¥çœ‹è¡¨ç»“æ„
```sql
DESCRIBE users;
```

### æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥
```sql
SHOW CREATE TABLE users;
```

### æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
```sql
SELECT * FROM users;
```

### æŸ¥è¯¢ç‰¹å®šè§’è‰²çš„ç”¨æˆ·
```sql
SELECT * FROM users WHERE role = 'teaching_office';
```

### æŸ¥çœ‹å¤–é”®å…³ç³»
```sql
SELECT 
    TABLE_NAME,
    COLUMN_NAME,
    REFERENCED_TABLE_NAME,
    REFERENCED_COLUMN_NAME
FROM
    INFORMATION_SCHEMA.KEY_COLUMN_USAGE
WHERE
    REFERENCED_TABLE_SCHEMA = 'teaching_office_evaluation'
    AND REFERENCED_TABLE_NAME IS NOT NULL;
```

### æŸ¥çœ‹è¡¨çš„è®°å½•æ•°
```sql
SELECT 
    TABLE_NAME,
    TABLE_ROWS
FROM 
    INFORMATION_SCHEMA.TABLES
WHERE 
    TABLE_SCHEMA = 'teaching_office_evaluation';
```

---

## ğŸ› ï¸ æ•°æ®åº“ç®¡ç†

### å¤‡ä»½æ•°æ®åº“
```bash
mysqldump -u root -p teaching_office_evaluation > backup.sql
```

### æ¢å¤æ•°æ®åº“
```bash
mysql -u root -p teaching_office_evaluation < backup.sql
```

### æ¸…ç©ºæ‰€æœ‰è¡¨æ•°æ®ï¼ˆæ…ç”¨ï¼ï¼‰
```sql
-- ç¦ç”¨å¤–é”®æ£€æŸ¥
SET FOREIGN_KEY_CHECKS = 0;

-- æ¸…ç©ºæ‰€æœ‰è¡¨
TRUNCATE TABLE users;
TRUNCATE TABLE colleges;
-- ... å…¶ä»–è¡¨

-- å¯ç”¨å¤–é”®æ£€æŸ¥
SET FOREIGN_KEY_CHECKS = 1;
```

---

## ğŸ’¡ æ¨èå·¥å…·å¯¹æ¯”

| å·¥å…· | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| **Navicat** | åŠŸèƒ½å¼ºå¤§ã€ç•Œé¢ç¾è§‚ã€æ˜“ç”¨ | æ”¶è´¹è½¯ä»¶ | â­â­â­â­â­ |
| **MySQL Workbench** | å®˜æ–¹å·¥å…·ã€å…è´¹ | ç•Œé¢è¾ƒå¤æ‚ | â­â­â­â­ |
| **å‘½ä»¤è¡Œ** | å¿«é€Ÿã€ç›´æ¥ | éœ€è¦è®°SQLå‘½ä»¤ | â­â­â­ |
| **phpMyAdmin** | Webç•Œé¢ã€æ–¹ä¾¿ | éœ€è¦å®‰è£…é…ç½® | â­â­â­ |
| **VS Codeæ‰©å±•** | é›†æˆå¼€å‘ç¯å¢ƒ | åŠŸèƒ½ç›¸å¯¹ç®€å• | â­â­â­â­ |
| **Pythonè„šæœ¬** | è‡ªåŠ¨åŒ–ã€å¯å®šåˆ¶ | éœ€è¦ç¼–ç¨‹çŸ¥è¯† | â­â­â­â­ |

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

**æœ€ç®€å•çš„æ–¹å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰ï¼š**

1. è¿è¡Œæ£€æŸ¥è„šæœ¬ï¼š
   ```bash
   cd backend
   python check_database.py
   ```

2. å¦‚æœæœ‰Navicatï¼Œä½¿ç”¨Navicatè¿æ¥æŸ¥çœ‹

3. å¦‚æœæ²¡æœ‰å›¾å½¢åŒ–å·¥å…·ï¼Œä½¿ç”¨å‘½ä»¤è¡Œï¼š
   ```bash
   mysql -u root -p
   # è¾“å…¥å¯†ç ï¼šroot
   USE teaching_office_evaluation;
   SHOW TABLES;
   ```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ— æ³•è¿æ¥åˆ°MySQL
**A:** æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
```bash
# Windows
net start MySQL

# æˆ–è€…åœ¨æœåŠ¡ç®¡ç†å™¨ä¸­å¯åŠ¨MySQLæœåŠ¡
```

### Q2: å¯†ç é”™è¯¯
**A:** ç¡®è®¤å¯†ç æ˜¯ `root`ï¼Œå¦‚æœä¸å¯¹ï¼Œä¿®æ”¹ `backend/.env` æ–‡ä»¶

### Q3: æ‰¾ä¸åˆ°æ•°æ®åº“
**A:** è¿è¡Œè¿ç§»è„šæœ¬åˆ›å»ºæ•°æ®åº“ï¼š
```bash
cd backend
python migrate_to_mysql.py --create-tables
```

### Q4: è¡¨æ˜¯ç©ºçš„
**A:** è¿™æ˜¯æ­£å¸¸çš„ï¼Œæ–°å»ºçš„æ•°æ®åº“æ²¡æœ‰æ•°æ®ã€‚å¯åŠ¨åº”ç”¨åä¼šè‡ªåŠ¨æ·»åŠ æ•°æ®ã€‚

---

**æç¤º**: å¦‚æœä½ æƒ³è¦å›¾å½¢åŒ–ç•Œé¢ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨Navicatï¼Œå®ƒæ˜¯æœ€å¥½ç”¨çš„MySQLç®¡ç†å·¥å…·ï¼
