# 新评分表实施进度

## ✅ 已完成（第一步）

### 1. 创建新表单组件

文件：`frontend/src/components/NewSelfEvaluationForm.vue`

**已实现的功能**：

#### 一、常规教学工作部分（8个指标）

1. ✅ 教学过程管理
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

2. ✅ 教学质量管理
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

3. ✅ 课程考核
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

4. ✅ 教育教学科研工作
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

5. ✅ 课程建设
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

6. ✅ 教师队伍建设
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

7. ✅ 科学研究与学术交流
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

8. ✅ 教学档案室管理与建设
   - 文本输入框（1000字符限制）
   - 自评分输入（0-10分，步长0.5）
   - 满分显示（10分）

#### 功能特性

✅ **自动计分**：实时计算常规教学工作总分  
✅ **表单验证**：所有字段必填，内容长度10-1000字符  
✅ **美观UI**：使用渐变色显示小计，视觉效果好  
✅ **用户友好**：每个字段都有placeholder提示  
✅ **保存草稿**：支持保存未完成的表单  
✅ **提交锁定**：提交后表单锁定，防止修改  

---

## ⏳ 待完成（下一步）

### 2. 特色与亮点项目部分（4个指标）

需要实现：

#### 2.1 教学改革项目
- [ ] 项目列表展示（表格形式）
- [ ] 添加项目按钮
- [ ] 项目名称输入
- [ ] 项目级别选择（下拉框，9个选项）
- [ ] 自动计算得分（根据级别）
- [ ] 上传附件按钮
- [ ] 删除项目按钮
- [ ] 项目总分计算

**评分规则**：
```javascript
const scoringRules = {
  national_key: 10,           // 国家级重点
  national_general: 8,        // 国家级一般
  provincial_key: 6,          // 省级重点
  provincial_general_a: 4,    // 省级一般A类
  provincial_general_b: 2,    // 省级一般B类
  provincial_vocational_key: 6,    // 省级职教重点
  provincial_vocational_general: 3, // 省级职教一般
  school_key: 2,              // 校级重点
  school_general: 1           // 校级一般
}
```

#### 2.2 年度获得教学相关荣誉表彰
- [ ] 荣誉列表展示
- [ ] 添加荣誉按钮
- [ ] 荣誉名称输入
- [ ] 荣誉级别选择（国家级/省级/校级）
- [ ] 自动计算得分
- [ ] 上传附件按钮
- [ ] 删除荣誉按钮
- [ ] 荣誉总分计算

**评分规则**：
```javascript
const scoringRules = {
  national: 10,    // 国家级
  provincial: 5,   // 省级
  school: 3        // 校级
}
```

#### 2.3 教学比赛
- [ ] 比赛列表展示
- [ ] 添加比赛按钮
- [ ] 比赛名称输入
- [ ] 比赛级别和奖项选择
- [ ] 自动计算得分
- [ ] 上传附件按钮
- [ ] 删除比赛按钮
- [ ] 比赛总分计算

**评分规则**：
```javascript
const scoringRules = {
  national_first: 10,    // 国家级一等奖
  national_second: 8,    // 国家级二等奖
  national_third: 6,     // 国家级三等奖
  provincial_first: 6,   // 省级一等奖
  provincial_second: 5,  // 省级二等奖
  provincial_third: 3,   // 省级三等奖
  school_first: 3,       // 校级一等奖
  school_second: 2,      // 校级二等奖
  school_third: 1        // 校级三等奖
}
```

#### 2.4 指导创新创业比赛获奖情况
- [ ] 比赛列表展示
- [ ] 添加比赛按钮
- [ ] 比赛名称输入
- [ ] 比赛级别和奖项选择
- [ ] 自动计算得分
- [ ] 上传附件按钮
- [ ] 删除比赛按钮
- [ ] 比赛总分计算

**评分规则**：
```javascript
const scoringRules = {
  national_gold: 10,      // 国家级金奖
  national_silver: 8,     // 国家级银奖
  national_bronze: 6,     // 国家级铜奖
  provincial_gold: 6,     // 省级金奖
  provincial_silver: 5,   // 省级银奖
  provincial_bronze: 3,   // 省级铜奖
  school_first: 3,        // 校级一等奖
  school_second: 2,       // 校级二等奖
  school_third: 1         // 校级三等奖
}
```

### 3. 负面清单部分（4个指标）

需要实现：

#### 3.1 教师中有严重违反师德师风的行为
- [ ] 案例数量输入（数字输入框）
- [ ] 自动计算扣分（每起-10分）
- [ ] 扣分显示

#### 3.2 出现教学（管理）事故
- [ ] 案例数量输入（数字输入框）
- [ ] 自动计算扣分（每起-5分）
- [ ] 扣分显示

#### 3.3 教学过程中出现意识形态问题
- [ ] 案例数量输入（数字输入框）
- [ ] 自动计算扣分（每起-5分）
- [ ] 扣分显示

#### 3.4 教师未完成年度基本教学工作量
- [ ] 未完成比例输入（百分比）
- [ ] 自动计算扣分（>10%: -2分, >20%: -5分, >30%: -10分）
- [ ] 扣分显示

### 4. 总分汇总

需要实现：

- [ ] 常规教学工作总分显示
- [ ] 特色与亮点项目总分显示
- [ ] 负面清单扣分显示
- [ ] 最终得分计算和显示
- [ ] 美观的汇总卡片

### 5. 其他功能

- [ ] 预览对话框（显示完整表单内容）
- [ ] 附件上传集成
- [ ] 数据持久化（保存到后端）
- [ ] 加载已保存的数据
- [ ] 响应式设计优化

---

## 📝 数据结构设计

### 完整的formData结构

```typescript
interface FormData {
  teachingOfficeId: string
  evaluationYear: number
  
  // 常规教学工作（已完成）
  regularTeaching: {
    teachingProcessManagement: {
      content: string
      selfScore: number
      maxScore: number
    }
    // ... 其他7个指标
  }
  
  // 特色与亮点项目（待完成）
  highlights: {
    teachingReformProjects: {
      items: Array<{
        name: string
        level: string
        score: number
        attachmentId?: string
      }>
      totalScore: number
    }
    teachingHonors: {
      items: Array<{
        name: string
        level: string
        score: number
        attachmentId?: string
      }>
      totalScore: number
    }
    teachingCompetitions: {
      items: Array<{
        name: string
        level: string
        prize: string
        score: number
        attachmentId?: string
      }>
      totalScore: number
    }
    innovationCompetitions: {
      items: Array<{
        name: string
        level: string
        prize: string
        score: number
        attachmentId?: string
      }>
      totalScore: number
    }
  }
  
  // 负面清单（待完成）
  negativeList: {
    ethicsViolations: {
      count: number
      deduction: number
    }
    teachingAccidents: {
      count: number
      deduction: number
    }
    ideologyIssues: {
      count: number
      deduction: number
    }
    workloadIncomplete: {
      percentage: number
      deduction: number
    }
  }
  
  // 总分汇总（待完成）
  summary: {
    regularTeachingTotal: number
    highlightsTotal: number
    negativeListTotal: number
    finalScore: number
  }
}
```

---

## 🎨 UI设计要点

### 已实现的设计

1. **分段式布局**：使用 `el-divider` 分隔不同部分
2. **渐变色小计**：使用紫色渐变背景显示小计
3. **评分输入行**：灰色背景，清晰显示评分区域
4. **响应式设计**：适配不同屏幕尺寸

### 待实现的设计

1. **表格展示**：亮点项目使用表格展示，便于管理
2. **警告提示**：负面清单使用警告色（黄色/红色）
3. **总分卡片**：使用大号字体和醒目颜色显示最终得分
4. **操作按钮**：统一的按钮样式和布局

---

## 🔧 技术要点

### 已使用的技术

- Vue 3 Composition API
- TypeScript
- Element Plus组件库
- 响应式数据绑定
- 表单验证

### 待使用的技术

- 动态表格（el-table）
- 文件上传（el-upload）
- 对话框（el-dialog）
- 消息提示（ElMessage）
- 确认框（ElMessageBox）

---

## 📅 实施计划

### 第一步：常规教学工作 ✅ 已完成
- 时间：已完成
- 文件：`NewSelfEvaluationForm.vue`

### 第二步：特色与亮点项目 ⏳ 进行中
- 预计时间：2-3小时
- 需要添加：动态表格、评分规则、附件上传

### 第三步：负面清单 ⏳ 待开始
- 预计时间：1小时
- 需要添加：数字输入、自动扣分计算

### 第四步：总分汇总 ⏳ 待开始
- 预计时间：30分钟
- 需要添加：汇总卡片、最终得分计算

### 第五步：集成和测试 ⏳ 待开始
- 预计时间：1-2小时
- 需要：API集成、数据持久化、测试

---

## 🚀 下一步行动

你想让我继续完成哪一部分？

1. **特色与亮点项目**（教学改革项目、荣誉表彰、教学比赛、创新创业比赛）
2. **负面清单**（师德师风、教学事故、意识形态、工作量）
3. **总分汇总**（最终得分计算和显示）
4. **其他功能**（预览、附件上传等）

请告诉我你想先完成哪一部分！
