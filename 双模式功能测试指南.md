# 双模式功能测试指南

## 🎯 测试目标

验证教研室数据管理平台的双模式切换功能是否正常工作。

---

## 🚀 前置条件

1. ✅ 前端服务已启动（端口 3000）
2. ✅ 后端服务已启动（端口 8000）
3. ✅ 浏览器已打开 http://localhost:3000

---

## 📋 测试步骤

### 测试 1: 初始状态检查

**操作步骤**:
1. 打开浏览器访问 http://localhost:3000
2. 观察左侧导航栏

**预期结果**:
- ✅ 侧边栏显示校徽和"教研室数据管理平台"标题
- ✅ 显示模式切换按钮（默认显示"切换到四角色模式"）
- ✅ 显示三个端口选项：教研室端、管理端、校长办公会端
- ✅ 默认选中"教研室端"
- ✅ 主内容区不显示流程条

---

### 测试 2: 切换到四角色模式

**操作步骤**:
1. 点击侧边栏顶部的"切换到四角色模式"按钮

**预期结果**:
- ✅ 按钮文字变为"切换到三端模式"
- ✅ 侧边栏显示四个角色选项：
  - 普通教师
  - 教研室负责人
  - 二级学院负责人
  - 学校教务处负责人
- ✅ 默认选中"普通教师"
- ✅ 角色徽章显示"普通教师"
- ✅ 主内容区显示流程条（8个步骤）
- ✅ 顶部标签栏显示"我的教研室"和"数据分析"两个标签
- ✅ 功能卡片显示普通教师相关功能

---

### 测试 3: 四角色模式下切换角色

**操作步骤**:
1. 点击"教研室负责人"

**预期结果**:
- ✅ 侧边栏"教研室负责人"高亮显示
- ✅ 角色徽章显示"教研室负责人"
- ✅ 流程条高亮节点变化（1, 2, 3, 8）
- ✅ 顶部标签栏显示4个标签：自评管理、材料管理、AI评分、改进闭环
- ✅ 功能卡片显示教研室负责人相关功能

**操作步骤**:
2. 点击"二级学院负责人"

**预期结果**:
- ✅ 侧边栏"二级学院负责人"高亮显示
- ✅ 角色徽章显示"二级学院负责人"
- ✅ 流程条高亮节点变化（仅节点8）
- ✅ 顶部标签栏显示2个标签：学院驾驶舱、整改督导
- ✅ 功能卡片显示二级学院负责人相关功能

**操作步骤**:
3. 点击"学校教务处负责人"

**预期结果**:
- ✅ 侧边栏"学校教务处负责人"高亮显示
- ✅ 角色徽章显示"学校教务处负责人"
- ✅ 流程条高亮节点变化（3, 4, 5, 7）
- ✅ 顶部标签栏显示4个标签：监控中心、评分管理、异常处理、公示管理
- ✅ 功能卡片显示学校教务处负责人相关功能

---

### 测试 4: 切换回三端模式

**操作步骤**:
1. 点击侧边栏顶部的"切换到三端模式"按钮

**预期结果**:
- ✅ 按钮文字变为"切换到四角色模式"
- ✅ 侧边栏显示三个端口选项：教研室端、管理端、校长办公会端
- ✅ 默认选中"教研室端"
- ✅ 角色徽章显示"教研室端"
- ✅ 主内容区不显示流程条
- ✅ 顶部标签栏显示教研室端的标签
- ✅ 功能卡片显示教研室端相关功能

---

### 测试 5: 三端模式下切换端口

**操作步骤**:
1. 点击"管理端"

**预期结果**:
- ✅ 侧边栏"管理端"高亮显示
- ✅ 角色徽章显示"管理端"
- ✅ 顶部标签栏显示3个标签：监控中心、分析中心、应用中心
- ✅ 功能卡片显示管理端相关功能

**操作步骤**:
2. 点击"校长办公会端"

**预期结果**:
- ✅ 侧边栏"校长办公会端"高亮显示
- ✅ 角色徽章显示"校长办公会端"
- ✅ 顶部标签栏显示2个标签：数据看板、审批中心
- ✅ 功能卡片显示校长办公会端相关功能

---

### 测试 6: 状态保持测试

**操作步骤**:
1. 切换到四角色模式
2. 选择"教研室负责人"
3. 刷新浏览器页面（F5）

**预期结果**:
- ✅ 页面刷新后仍然保持四角色模式
- ✅ 仍然选中"教研室负责人"
- ✅ 所有界面元素保持一致

**操作步骤**:
4. 切换到三端模式
5. 选择"管理端"
6. 刷新浏览器页面（F5）

**预期结果**:
- ✅ 页面刷新后仍然保持三端模式
- ✅ 仍然选中"管理端"
- ✅ 所有界面元素保持一致

---

### 测试 7: 标签页切换测试

**操作步骤**（四角色模式 - 教研室负责人）:
1. 切换到四角色模式
2. 选择"教研室负责人"
3. 依次点击顶部的4个标签页

**预期结果**:
- ✅ 点击"自评管理"：显示填写自评表、查看自评表功能
- ✅ 点击"材料管理"：显示上传附件、附件列表功能
- ✅ 点击"AI评分"：显示触发评分、评分结果功能
- ✅ 点击"改进闭环"：显示提交改进措施、查看审核状态功能

**操作步骤**（三端模式 - 管理端）:
4. 切换到三端模式
5. 选择"管理端"
6. 依次点击顶部的3个标签页

**预期结果**:
- ✅ 点击"监控中心"：显示手动评分、最终得分、异常处理功能
- ✅ 点击"分析中心"：显示数据同步、发起公示功能
- ✅ 点击"应用中心"：显示附件管理、系统配置功能

---

### 测试 8: 功能卡片点击测试

**操作步骤**:
1. 在任意模式下，点击一个功能卡片（如"填写自评表"）

**预期结果**:
- ✅ 页面跳转到对应的功能页面
- ✅ 如果路由为 '#'，则不跳转（功能未实现）
- ✅ 控制台无错误信息

---

### 测试 9: 点击侧边栏标题返回首页

**操作步骤**:
1. 在四角色模式下，选择"学校教务处负责人"
2. 点击侧边栏顶部的校徽或标题

**预期结果**:
- ✅ 重置到"教研室负责人"（四角色模式默认）
- ✅ 标签页重置到第一个

**操作步骤**:
3. 切换到三端模式，选择"校长办公会端"
4. 点击侧边栏顶部的校徽或标题

**预期结果**:
- ✅ 重置到"教研室端"（三端模式默认）
- ✅ 标签页重置到第一个

---

### 测试 10: 响应式设计测试

**操作步骤**:
1. 打开浏览器开发者工具（F12）
2. 切换到移动设备模拟模式
3. 选择不同的设备尺寸（iPhone、iPad等）

**预期结果**:
- ✅ 在小屏幕（< 768px）时：
  - 侧边栏宽度收缩为 60px
  - 侧边栏标题、菜单文字、用户详情、角色徽章、模式切换按钮隐藏
  - 只显示图标
  - 主内容区左边距调整为 60px
  - 顶部标签栏只显示图标，不显示文字
- ✅ 在大屏幕时：
  - 所有元素正常显示
  - 布局美观

---

## 🐛 常见问题排查

### 问题 1: 切换模式后页面没有变化

**可能原因**:
- 浏览器缓存问题

**解决方法**:
1. 按 Ctrl+Shift+R 强制刷新页面
2. 清除浏览器缓存后重试

### 问题 2: 刷新页面后模式没有保持

**可能原因**:
- localStorage 被禁用或清除

**解决方法**:
1. 检查浏览器是否允许使用 localStorage
2. 打开开发者工具，在 Console 中输入：
   ```javascript
   localStorage.getItem('viewMode')
   ```
3. 如果返回 null，说明状态没有保存

### 问题 3: 流程条没有显示

**可能原因**:
- 当前处于三端模式

**解决方法**:
1. 切换到四角色模式
2. 流程条只在四角色模式下显示

### 问题 4: 功能卡片点击后没有跳转

**可能原因**:
- 该功能的路由设置为 '#'（功能未实现）

**解决方法**:
1. 检查控制台是否有错误信息
2. 确认该功能是否已实现对应的路由

---

## ✅ 测试完成标准

完成以上所有测试步骤，且所有预期结果都符合要求，即可认为双模式功能测试通过。

---

## 📊 测试报告模板

```
测试日期: ___________
测试人员: ___________
浏览器: ___________
操作系统: ___________

测试结果:
- [ ] 测试 1: 初始状态检查
- [ ] 测试 2: 切换到四角色模式
- [ ] 测试 3: 四角色模式下切换角色
- [ ] 测试 4: 切换回三端模式
- [ ] 测试 5: 三端模式下切换端口
- [ ] 测试 6: 状态保持测试
- [ ] 测试 7: 标签页切换测试
- [ ] 测试 8: 功能卡片点击测试
- [ ] 测试 9: 点击侧边栏标题返回首页
- [ ] 测试 10: 响应式设计测试

发现的问题:
1. ___________
2. ___________
3. ___________

总体评价:
___________
```

---

## 🎉 测试建议

1. **多浏览器测试**: 在 Chrome、Firefox、Edge、Safari 等不同浏览器中测试
2. **多设备测试**: 在桌面、平板、手机等不同设备上测试
3. **性能测试**: 观察模式切换时的性能表现，是否有卡顿
4. **用户体验测试**: 邀请实际用户进行测试，收集反馈
5. **边界测试**: 测试极端情况，如快速连续切换模式

祝测试顺利！🚀
